@model IEnumerable<Tasneef.Models.AuditTrail>
@using Microsoft.AspNetCore.Mvc.Localization
@using Tasneef;
@inject IHtmlLocalizer<SharedResource> Localizer

@{
    ViewData["Title"] = Localizer["Index"];
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="col-12">
    <div class="card">

        <div class="card-body">
            <h4 class="card-title">@Localizer["Audit Trails"]</h4>
            <table id="dtable" class="display nowrap" style="width:100%">
                <thead>
                    <tr>

                        <th width="10%">@Localizer["Change Date"]</th>
                        <th width="10%">
                            @Localizer["Change Type"]
                        </th>
                        <th width="10%">@Localizer["User"]</th>
                        <th width="10%">
                            @Localizer["Model"]
                        </th>
                        <th width="10%">@Localizer["Key Value"]</th>
                        <th width="10%">@Localizer["Field"]</th>

                        <th width="10%">@Localizer["Old Value"]</th>
                        <th width="10%">@Localizer["New Value"]</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>


            </table>




        </div>
    </div>
</div>




@section Scripts {

    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js"></script>


    
    <script src="~/js/dataTables.responsive.min.js"></script>
    <!-- start - This is for export functionality only -->
    
    <script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.flash.min.js"></script>
    
    


    <script>


        $(document).ready(function () {


            $('#dtable').DataTable({

                ajax: {
                    url: '/AuditTrails/GetData',
                    dataSrc: ''
                }
                ,
                columns: [

                    { data: 'auditDateTime' },
                    { data: 'auditType' },
                    { data: 'auditUser' },
                    { data: 'tableName' },
                    { data: 'keyValues' },
                    { data: 'changedColumn' },
                    { data: 'oldValue' },
                    { data: 'newValue' },

                ],


                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ]


            });


        });
        $('.buttons-copy, .buttons-csv, .buttons-print, .buttons-pdf, .buttons-excel').addClass('btn btn-primary mr-1');
    </script>





}



